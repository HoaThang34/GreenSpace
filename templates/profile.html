<!doctype html>
<html lang="vi">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GreenSpace ‚Äî H·ªì s∆° c·ªßa {{ profile_user.display_name }}</title>
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="/static/profile_style.css">
</head>

<body>
  <header class="appbar">
    <div class="brand">
      <a href="/community" style="display:flex;align-items:center;gap:10px;text-decoration:none;">
        <span class="logo">üå±</span>
        <div>
          <span class="brand-title" style="color:var(--foreground);">H·ªì s∆°</span>
          <div class="brand-tagline">@{{ profile_user.username }}</div>
        </div>
      </a>
    </div>
    <div class="controls">
      <a class="chip" href="/chat" style="background: var(--mood); color: white; border-color: var(--mood);">Chatbot</a>
      <a class="chip" href="/community">C·ªông ƒë·ªìng</a>
      <a class="chip" href="/friends">B·∫°n b√®</a>
      <a class="chip" href="/messages">Tin nh·∫Øn</a>
    </div>
  </header>

  <main class="profile-container">
    <div class="profile-header">
      <div class="profile-avatar" style="background-color:{{ profile_user.avatar_color }};">
        {{ profile_user.display_name[0]|upper }}
      </div>
      <div class="profile-info">
        <h1>{{ profile_user.display_name }}</h1>
        <p class="username">@{{ profile_user.username }}</p>
        <p class="bio">{{ profile_user.bio or 'Ch∆∞a c√≥ m√¥ t·∫£.' }}</p>
      </div>
      {% if is_own_profile %}
      <button id="editProfileBtn" class="btn primary">Ch·ªânh s·ª≠a h·ªì s∆°</button>
      {% else %}
      <div id="friendActions" class="friend-actions-profile">
        <button id="friendRequestBtn" class="btn primary" style="display:none;">K·∫øt b·∫°n</button>
        <button id="friendPendingBtn" class="btn" style="display:none;">ƒêang ch·ªù</button>
        <button id="friendRemoveBtn" class="btn destructive" style="display:none;">H·ªßy k·∫øt b·∫°n</button>
        <a href="/messages/{{ profile_user.id }}" class="btn" id="messageBtn" style="display:none;">Nh·∫Øn tin</a>
      </div>
      {% endif %}
    </div>

    <div class="profile-details">
      <div class="detail-item">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path
            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
          </path>
        </svg>
        <strong>S·ªü th√≠ch:</strong> {{ profile_user.hobbies or 'Ch∆∞a c·∫≠p nh·∫≠t' }}
      </div>
      <div class="detail-item">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
          <path d="M6 12v5c3 3 10 3 12 0v-5"></path>
        </svg>
        <strong>L·ªõp:</strong> {{ profile_user.grade or 'Ch∆∞a c·∫≠p nh·∫≠t' }}
      </div>
      <div class="detail-item">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <strong>Tr∆∞·ªùng:</strong> {{ profile_user.school or 'Ch∆∞a c·∫≠p nh·∫≠t' }}
      </div>
    </div>

    <div class="activity-feed">
      <h2>Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
      {% for post in posts %}
      <a href="/post/{{ post.id }}" class="post-item">
        <p>{{ post.content[:200] }}...</p>
        <small>{{ post.formatted_timestamp }}</small>
      </a>
      {% else %}
      <p class="text-muted" style="padding: 20px 0;">Ng∆∞·ªùi d√πng n√†y ch∆∞a c√≥ b√†i ƒëƒÉng n√†o.</p>
      {% endfor %}
    </div>
  </main>

  <div class="modal" id="editProfileModal"></div>

  <script src="/static/profile.js"></script>
  <script src="/static/theme.js"></script>
</body>

</html>