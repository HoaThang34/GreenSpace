<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solace ‚Äî Chi ti·∫øt b√†i ƒëƒÉng</title>
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body { background: var(--bg); }
    .community-container { max-width: 750px; margin: 30px auto; padding: 0 15px; }
    .post-card { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; margin-bottom: 25px; overflow: hidden; }
    .post-body { padding: 25px 30px; }
    .post-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
    .author-avatar { width: 45px; height: 45px; border-radius: 50%; background: var(--chip-bg); display: grid; place-items: center; font-weight: 600; font-size: 1.3rem; flex-shrink: 0; }
    .author-info { flex-grow: 1; }
    .post-author { font-weight: 600; color: var(--fg); font-size: 1.1rem; }
    .post-meta { font-size: 0.85rem; color: var(--muted); }
    .post-content { line-height: 1.8; white-space: pre-wrap; font-size: 1.1rem; }
    .delete-btn { background: transparent; border: 1px solid var(--border); border-radius: 8px; color: var(--muted); cursor: pointer; font-size: 0.8rem; padding: 5px 10px; transition: all 0.2s; }
    .delete-btn:hover { color: #fff; background: var(--mood-anger); border-color: var(--mood-anger); }
    
    /* Style cho khu v·ª±c b√¨nh lu·∫≠n */
    .comments-section {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 25px 30px;
        margin-top: 30px;
    }
    .comment-list-wrapper {
        max-height: 400px; /* Gi·ªõi h·∫°n chi·ªÅu cao */
        overflow-y: auto;   /* Th√™m thanh cu·ªôn khi c·∫ßn */
        padding-right: 10px; /* T·∫°o kho·∫£ng tr·ªëng cho thanh cu·ªôn */
        margin-top: 20px;
    }
    .comment-card {
        display: flex;
        gap: 15px;
        padding: 15px 0;
        border-bottom: 1px solid var(--border);
    }
    .comment-card:last-child { border-bottom: none; }
    .comment-author { font-weight: 600; }
    .comment-meta { font-size: 0.8rem; color: var(--muted); margin-left: 8px; }
    .comment-content { color: var(--fg); margin-top: 4px; line-height: 1.6; }
  </style>
</head>
<body>
  <header class="appbar">
    <div class="brand">
        <a href="/chat" style="display:flex; align-items:center; gap:12px; text-decoration:none;">
            <span class="logo">üå±</span>
            <span class="brand-title" style="color:var(--fg);">Solace</span>
        </a>
    </div>
    <div class="controls">
      <a class="chip" href="/community">‚Üê Quay l·∫°i</a>
    </div>
  </header>
  
  <main class="community-container">
    <!-- N∆°i hi·ªÉn th·ªã b√†i ƒëƒÉng ch√≠nh -->
    <div id="postDetailContainer"></div>

    <!-- Khu v·ª±c b√¨nh lu·∫≠n v·ªõi thi·∫øt k·∫ø m·ªõi -->
    <div class="comments-section">
        <h3>B√¨nh lu·∫≠n</h3>
        <div class="comment-list-wrapper" id="commentListWrapper">
            <div id="commentList"></div>
        </div>
    </div>

    <!-- Form t·∫°o b√¨nh lu·∫≠n -->
    <div class="post-card" style="margin-top: 30px;">
        <div class="post-body">
            <form id="createCommentForm">
                <textarea id="commentContent" style="width:100%; min-height:80px; background:transparent; border:none; color:var(--fg); font-size:1rem; resize:vertical;" placeholder="Vi·∫øt b√¨nh lu·∫≠n c·ªßa b·∫°n..." required></textarea>
                <div class="actions" style="justify-content: flex-end; margin-top: 15px; border-top:1px solid var(--border); padding-top:15px;">
                    <button type="submit" class="btn primary">G·ª≠i b√¨nh lu·∫≠n</button>
                </div>
            </form>
        </div>
    </div>
  </main>
  
  <script> const POST_ID = "{{ post_id }}"; </script>
  <script src="/static/post_detail.js"></script>
  <script src="/static/theme.js"></script>
</body>
</html>